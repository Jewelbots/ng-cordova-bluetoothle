// ng-cordova-bluetoothle - v0.1.4 (2016-01-04)
// http://jewelbots.com
angular.module("ngCordovaBluetoothle",[]).factory("$cordovaBluetoothle",["$q","$timeout",function(a,b){"use strict";return{initialize:function(b){var c=a.defer();return bluetoothle?(bluetoothle.initialize(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise):(c.resolve(null),c.promise)},enable:function(){var b=a.defer();return bluetoothle.enable(function(a){b.resolve(a)},function(a){b.reject(a)}),b.promise},disable:function(){var b=a.defer();return bluetoothle.disable(function(a){b.resolve(a)},function(a){b.reject(a)}),b.promise},startScan:function(c){var d=[],e=500,f=a.defer();c.hasOwnProperty("scanDuration")?e=c.scanDuration:c.hasOwnProperty("time")&&(c.scanDuration=c.time);var g=b(function(){f.resolve(d)},e);return bluetoothle.startScan(function(a){a.hasOwnProperty("status")&&"scanResult"===a.status?d.push(a):f.notify(a)},function(a){b.cancel(g),f.reject(a)},c),f.promise},stopScan:function(){var b=a.defer();return bluetoothle.stopScan(function(a){b.resolve(a)},function(a){b.reject(a)}),b.promise},retrieveConnected:function(b){var c=a.defer();return bluetoothle.retrieveConnected(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},connect:function(b){var c=a.defer();return bluetoothle.connect(function(a){a.hasOwnProperty("status")&&"connected"===a.status?c.resolve(a):a.hasOwnProperty("status")&&"connecting"===a.status?c.notify(a):a.hasOwnProperty("status")&&"disconnected"===a.status?c.reject(a):c.notify(a)},function(a){c.reject(a)},b),c.promise},reconnect:function(b){var c=a.defer();return bluetoothle.reconnect(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},disconnect:function(b){var c=a.defer();return bluetoothle.disconnect(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},close:function(b){var c=a.defer();return bluetoothle.close(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},discover:function(b){var c=a.defer();return bluetoothle.discover(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},services:function(b){var c=a.defer();return bluetoothle.services(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},characteristics:function(b){var c=a.defer();return bluetoothle.characteristics(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},descriptors:function(b){var c=a.defer();return bluetoothle.descriptors(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},read:function(b){var c=a.defer();return bluetoothle.read(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},subscribe:function(b){var c=a.defer();return bluetoothle.subscribe(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},unsubscribe:function(b){var c=a.defer();return bluetoothle.unsubscribe(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},write:function(b){var c=a.defer();return bluetoothle.write(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},readDescriptor:function(b){var c=a.defer();return bluetoothle.readDescriptor(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},writeDescriptor:function(b){var c=a.defer();return bluetoothle.writeDescriptor(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},rssi:function(b){var c=a.defer();return bluetoothle.rssi(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},isInitialized:function(){var b=a.defer();return bluetoothle.isInitialized(function(a){b.resolve(a)}),b.promise},isEnabled:function(){var b=a.defer();return bluetoothle.isEnabled(function(a){b.resolve(a)}),b.promise},isScanning:function(){var b=a.defer();return bluetoothle.isScanning(function(a){b.resolve(a)}),b.promise},isConnected:function(b){var c=a.defer();return bluetoothle.isConnected(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},isDiscovered:function(b){var c=a.defer();return bluetoothle.isDiscovered(function(a){c.resolve(a)},b),c.promise},requestConnectionPriority:function(b){var c=a.defer();return bluetoothle.requestConnectionPriority(function(a){c.resolve(a)},function(a){c.reject(a)},b),c.promise},find:function(c){var d=a.defer(),e=[],f=500;c.hasOwnProperty("scanDuration")&&(f=c.scanDuration);var g=b(function(){d.resolve(e)},f);return c.hasOwnProperty("address")&&c.address.length>0||c.hasOwnProperty("name")&&c.name.length>0?bluetoothle.startScan(function(a){(a.hasOwnProperty("status")&&"scanResult"===a.status&&a.hasOwnProperty("address")&&a.address===c.address||a.hasOwnProperty("name")&&a.name.toLowerCase()===c.name.toLowerCase())&&(e.push(a),d.notify(e))},function(a){b.cancel(g),d.reject(a)},c):d.reject({error:"find requires 'name' or 'address' params ",params:c}),d.promise},encodedStringToBytes:function(a){return bluetoothle.encodedStringToBytes(a)},bytesToEncodedString:function(a){return bluetoothle.bytesToEncodedString(a)},stringToBytes:function(a){return bluetoothle.stringToBytes(a)},bytesToString:function(a){return bluetoothle.bytesToString(a)}}}]);